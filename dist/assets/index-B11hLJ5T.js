var m=Object.defineProperty;var x=(e,t,i)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var o=(e,t,i)=>(x(e,typeof t!="symbol"?t+"":t,i),i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const h of a.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function i(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(r){if(r.ep)return;r.ep=!0;const a=i(r);fetch(r.href,a)}})();class w{constructor(t){o(this,"canvas");o(this,"ctx");o(this,"scale",30);o(this,"cells",new y(this));o(this,"sizeX",0);o(this,"sizeY",0);o(this,"width",0);o(this,"height",0);o(this,"backgroundColor","#2b2a33");this.canvas=t;const i=t.getContext("2d");if(i===null)throw"canvas.getContext(2d) is null";this.ctx=i,this.resize(),window.addEventListener("resize",()=>this.resize())}resize(t){return this.scale=t??this.scale,this.width=this.canvas.width=innerWidth-innerWidth%this.scale,this.height=this.canvas.height=innerHeight-innerHeight%this.scale,this.sizeX=this.width/this.scale,this.sizeY=this.height/this.scale,this.redraw()}redraw(){for(let t=0;t<=this.width/this.scale;t++)for(let i=0;i<=this.height/this.scale;i++)this.cell(t,i).paint(this.backgroundColor);return this}cell(t,i){return this.cells.get(t,i)}getScale(){return this.scale}getSize(){return{x:this.sizeX,y:this.sizeY}}}class y{constructor(t){o(this,"cells",{});o(this,"data");this.grid=t,this.data=this.cells["0_0"]}get(t,i){var r;const l=`${t.toString()}_${i.toString()}`;return(r=this.cells)[l]??(r[l]={x:t,y:i}),this.data=this.cells[l],this}getX(t){return(t??this.data.x)*this.grid.getScale()}getY(t){return(t??this.data.y)*this.grid.getScale()}paint(t,i,l,r){this.grid.ctx.beginPath(),typeof t=="number"&&(t=`rgba(${t}, ${i}, ${l}, ${r??255})`),this.grid.ctx.fillStyle=t;const a=this.getX(),h=this.getY(),d=this.grid.getScale()-this.grid.ctx.lineWidth;return this.grid.ctx.clearRect(a,h,d,d),this.grid.ctx.fillRect(a,h,d,d),this.grid.ctx.closePath(),this}move(t,i){const l=this.grid.ctx.getImageData(this.getX()+1,this.getY()+1,1,1).data;return this.clear(),this.get(t,i).paint(l[0],l[1],l[2],l[3])}swap(t,i){const l=this.grid.ctx.getImageData(this.getX()+1,this.getY()+1,1,1).data,r=this.grid.ctx.getImageData(this.getX(t)+1,this.getY(i)+1,1,1).data;return this.paint(r[0],r[1],r[2],r[3]),this.get(t,i).paint(l[0],l[1],l[2],l[3])}clear(){return this.paint(this.grid.backgroundColor)}}const u=document.querySelector("canvas");if(u===null)throw"canvas not exists";const c=new w(u).resize(20),f=c.getSize(),s=Math.round(f.x/2),n=Math.round(f.y/2);c.cell(s,n).paint("red");for(let e=0;e<=5;e++){c.cell(s,n-e).paint("red");for(let t=0;t<=e;t++)c.cell(s-t,n-e).paint("red"),c.cell(s+t,n-e).paint("red")}c.cell(s-5,n-5).clear();c.cell(s+5,n-5).clear();for(let e=1;e<=3;e++)c.cell(s-e,n-6).paint("red"),c.cell(s+e,n-6).paint("red");function g(e=!0){for(let t=2;t<=4;t++)c.cell(e?s+t:s-t,n-7).paint("red");for(let t=4;t<=5;t++)c.cell(e?s+t:s-t,n-6).paint("red");c.cell(e?s+5:s-5,n-5).paint("red");for(let t=0;t<=4;t++)c.cell(e?s+t+1:s-t-1,n-t).paint("red");setTimeout(z,400,e)}function z(e=!0){for(let t=2;t<=4;t++)c.cell(e?s+t:s-t,n-7).clear();for(let t=4;t<=5;t++)c.cell(e?s+t:s-t,n-6).clear();c.cell(e?s+5:s-5,n-5).clear();for(let t=0;t<=4;t++)c.cell(e?s+t+1:s-t-1,n-t).clear()}function p(){g(),setTimeout(()=>{g(!1)},700),setTimeout(p,2e3)}p();
